(()=>{var e={d:(t,i)=>{for(var o in i)e.o(i,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:i[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{activate:()=>D,deactivate:()=>T});const i=require("vscode"),o=require("process"),n=i.env.uiKind===i.UIKind.Web;o.platform,o.platform,o.platform;var r=(e=>(e.Off="off",e.Error="error",e.Warn="warn",e.Info="info",e.Debug="debug",e))(r||{});const a="toggleexcludedfiles",s="toggleexcludedfiles";var l=(e=>(e.Loaded="toggleexcludedfiles:loaded",e.Toggled="toggleexcludedfiles:toggled",e))(l||{}),u=(e=>(e.Open="vscode.open",e.SetContext="setContext",e))(u||{}),g=(e=>(e.AppliedState="toggleexcludedfiles:appliedState",e.SavedState="toggleexcludedfiles:savedState",e))(g||{});const c="";const d=new class Logger2{constructor(){this._isDebugging=!1,this.level=0,this._logLevel=r.Off}configure(e,t,i=!1){this.provider=e,this._isDebugging=i,this.logLevel=t}enabled(e){return this.level>=h(e)}get isDebugging(){return this._isDebugging}get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e,this.level=h(this._logLevel),e===r.Off?(this.output?.dispose?.(),this.output=void 0):this.output=this.output??this.provider.createChannel(this.provider.name)}get timestamp(){return`[${(new Date).toISOString().replace(/T/," ").slice(0,-1)}]`}debug(e,...t){if(this.level<4&&!this.isDebugging)return;let i;"string"==typeof e?i=e:(i=t.shift(),null!=e&&(i=`${e.prefix} ${i??c}`)),this.isDebugging&&console.log(this.timestamp,`[${this.provider.name}]`,i??c,...t),null==this.output||this.level<4||this.output.appendLine(`${this.timestamp} ${i??c}${this.toLoggableParams(!0,t)}`)}error(e,t,...i){if(this.level<1&&!this.isDebugging)return;let o;if(o=null==t||"string"==typeof t?t:`${t.prefix} ${i.shift()??c}`,null==o){const t=e instanceof Error?e.stack:void 0;if(t){const e=/.*\s*?at\s(.+?)\s/.exec(t);null!=e&&(o=e[1])}}this.isDebugging&&console.error(this.timestamp,`[${this.provider.name}]`,o??c,...i,e),null==this.output||this.level<1||this.output.appendLine(`${this.timestamp} ${o??c}${this.toLoggableParams(!1,i)}\n${String(e)}`)}log(e,...t){if(this.level<3&&!this.isDebugging)return;let i;"string"==typeof e?i=e:(i=t.shift(),null!=e&&(i=`${e.prefix} ${i??c}`)),this.isDebugging&&console.log(this.timestamp,`[${this.provider.name}]`,i??c,...t),null==this.output||this.level<3||this.output.appendLine(`${this.timestamp} ${i??c}${this.toLoggableParams(!1,t)}`)}warn(e,...t){if(this.level<2&&!this.isDebugging)return;let i;"string"==typeof e?i=e:(i=t.shift(),null!=e&&(i=`${e.prefix} ${i??c}`)),this.isDebugging&&console.warn(this.timestamp,`[${this.provider.name}]`,i??c,...t),null==this.output||this.level<2||this.output.appendLine(`${this.timestamp} ${i??c}${this.toLoggableParams(!1,t)}`)}showOutputChannel(e){this.output?.show?.(e)}toLoggable(e,t){if("object"!=typeof e)return String(e);const i=this.provider.toLoggable?.(e);if(null!=i)return i;try{return JSON.stringify(e,t)}catch{return"<error>"}}toLoggableParams(e,t){if(0===t.length||e&&this.level<4&&!this.isDebugging)return c;const i=t.map((e=>this.toLoggable(e))).join(", ");return 0!==i.length?` — ${i}`:c}};function h(e){switch(e){case r.Off:return 0;case r.Error:return 1;case r.Warn:return 2;case r.Info:return 3;case r.Debug:return 4;default:return 0}}var p=Object.defineProperty,f=Object.getOwnPropertyDescriptor,C=(e,t,i,o)=>{for(var n,r=o>1?void 0:o?f(t,i):t,a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o?n(t,i,r):n(r))||r);return o&&r&&p(t,i,r),r};const v=[],w=(m=v,(e,t)=>function(e,t,o={}){return(n,s,l)=>{if("function"!=typeof l.value)throw new Error("not supported");let u;u=o.customErrorHandling?l.value:async function(...e){try{return await l.value.apply(this,o.args?o.args(e):e)}catch(e){if(d.error(e),o.showErrorMessage)if(d.enabled(r.Error)){const t=[{title:"Open Output Channel"}];await i.window.showErrorMessage(`${o.showErrorMessage}  —  ${e.toString()}`,...t)===t[0]&&d.showOutputChannel()}else i.window.showErrorMessage(`${o.showErrorMessage}  —  ${e.toString()}`);return}},e.push({name:`${a}.${t}`,key:s,method:u,options:o})}}(m,e,t));var m;class Commands{constructor(e){this.container=e,this._disposable=i.Disposable.from(...v.map((({name:e,method:t})=>i.commands.registerCommand(e,((...e)=>t.apply(this,e))))))}dispose(){this._disposable?.dispose()}restore(){return this.container.filesExclude.restoreConfiguration()}show(){return this.container.filesExclude.applyConfiguration()}toggle(){return this.container.filesExclude.toggleConfiguration()}}C([w("restore")],Commands.prototype,"restore",1),C([w("show")],Commands.prototype,"show",1),C([w("toggle")],Commands.prototype,"toggle",1);const b=new Map,y=new i.EventEmitter;y.event;async function _(e,t){b.set(e,t),await i.commands.executeCommand(u.SetContext,e,t),y.fire(e)}function x(e,t){if(e===t)return!0;if(null==e||null==t)return!1;const i=typeof e;return(i!==typeof t||"string"!==i&&"number"!==i&&"boolean"!==i)&&JSON.stringify(e)===JSON.stringify(t)}class Configuration{constructor(){this._onDidChange=new i.EventEmitter,this._onDidChangeAny=new i.EventEmitter,this._onWillChange=new i.EventEmitter}static configure(e){e.subscriptions.push(i.workspace.onDidChangeConfiguration(k.onConfigurationChanged,k))}get onDidChange(){return this._onDidChange.event}get onDidChangeAny(){return this._onDidChangeAny.event}get onWillChange(){return this._onWillChange.event}onConfigurationChanged(e){e.affectsConfiguration(s)?(this._onWillChange.fire(e),null!=this._overrides?.onChange&&(e=this._overrides.onChange(e)),this._onDidChangeAny.fire(e),this._onDidChange.fire(e)):this._onDidChangeAny.fire(e)}applyOverrides(e){this._overrides=e}clearOverrides(){null!=this._overrides&&(this._overrides.get=void 0,this._overrides.getAll=void 0,queueMicrotask((()=>this._overrides=void 0)))}get(e,t,o){const n=void 0===o?i.workspace.getConfiguration(s,t).get(e):i.workspace.getConfiguration(s,t).get(e,o);return null==this._overrides?.get?n:this._overrides.get(e,n)}getAll(e){const t=i.workspace.getConfiguration().get(s);return e||null==this._overrides?.getAll?t:this._overrides.getAll(t)}getAny(e,t,o){return void 0===o?i.workspace.getConfiguration(void 0,t).get(e):i.workspace.getConfiguration(void 0,t).get(e,o)}changed(e,t,i){return null==e||(Array.isArray(t)?t.some((t=>e.affectsConfiguration(`${s}.${t}`,i))):e.affectsConfiguration(`${s}.${t}`,i))}inspect(e,t){return i.workspace.getConfiguration(s,t).inspect(void 0===e?s:e)}inspectAny(e,t){return i.workspace.getConfiguration(void 0,t).inspect(e)}isUnset(e,t){const i=this.inspect(e,t);return void 0===i.workspaceFolderValue&&(void 0===i.workspaceValue&&void 0===i.globalValue)}async migrate(e,t,o){const n=this.inspect(e);if(void 0===n)return!1;let r=!1;return void 0!==n.globalValue&&(await this.update(t,null!=o.migrationFn?o.migrationFn(n.globalValue):n.globalValue,i.ConfigurationTarget.Global),r=!0),void 0!==n.workspaceValue&&(await this.update(t,null!=o.migrationFn?o.migrationFn(n.workspaceValue):n.workspaceValue,i.ConfigurationTarget.Workspace),r=!0),void 0!==n.workspaceFolderValue&&(await this.update(t,null!=o.migrationFn?o.migrationFn(n.workspaceFolderValue):n.workspaceFolderValue,i.ConfigurationTarget.WorkspaceFolder),r=!0),r||void 0===o.fallbackValue||(await this.update(t,o.fallbackValue,i.ConfigurationTarget.Global),r=!0),r}async migrateIfMissing(e,t,o){const n=this.inspect(e);if(void 0===n)return;const r=this.inspect(t);void 0!==n.globalValue&&(void 0!==r&&void 0!==r.globalValue||await this.update(t,null!=o.migrationFn?o.migrationFn(n.globalValue):n.globalValue,i.ConfigurationTarget.Global)),void 0!==n.workspaceValue&&(void 0!==r&&void 0!==r.workspaceValue||await this.update(t,null!=o.migrationFn?o.migrationFn(n.workspaceValue):n.workspaceValue,i.ConfigurationTarget.Workspace)),void 0!==n.workspaceFolderValue&&(void 0!==r&&void 0!==r.workspaceFolderValue||await this.update(t,null!=o.migrationFn?o.migrationFn(n.workspaceFolderValue):n.workspaceFolderValue,i.ConfigurationTarget.WorkspaceFolder))}matches(e,t,i){return e===t}name(e){return e}update(e,t,o){return i.workspace.getConfiguration(s).update(e,t,o)}updateAny(e,t,o,n){return i.workspace.getConfiguration(void 0,o===i.ConfigurationTarget.Global?void 0:n).update(e,t,o)}updateEffective(e,t){const o=this.inspect(e);return void 0!==o.workspaceFolderValue?t===o.workspaceFolderValue?Promise.resolve(void 0):this.update(e,t,i.ConfigurationTarget.WorkspaceFolder):void 0!==o.workspaceValue?t===o.workspaceValue?Promise.resolve(void 0):this.update(e,t,i.ConfigurationTarget.Workspace):o.globalValue===t||void 0===o.globalValue&&t===o.defaultValue?Promise.resolve(void 0):this.update(e,x(t,o.defaultValue)?void 0:t,i.ConfigurationTarget.Global)}}const k=new Configuration;class FilesExcludeController{constructor(e){this.container=e,this._onDidToggle=new i.EventEmitter,this._section="files.exclude",this._working=!1,this._loaded=!1,this._disposable=k.onDidChangeAny(this.onConfigurationChanged,this),this.onConfigurationChanged()}get onDidToggle(){return this._onDidToggle.event}dispose(){this._disposable?.dispose()}get appliedState(){return g.AppliedState}get savedState(){return g.SavedState}onConfigurationChanged(e){if(this._working)return;if(null!=e&&!e.affectsConfiguration(this._section))return;const t=this.getSavedExcludeConfiguration();if(null==t)return;d.log("ExcludeController.onConfigurationChanged");const i=this.getExcludeConfiguration();if(null!=i&&x(t.globalValue,i.globalValue)&&x(t.workspaceValue,i.workspaceValue))return;const o=this.getAppliedExcludeConfiguration();null!=i&&null!=o&&x(o.globalValue,i.globalValue)&&x(o.workspaceValue,i.workspaceValue)||(d.log("ExcludeController.onConfigurationChanged","clearing state"),this.clearExcludeConfiguration())}async applyConfiguration(){if(!this._working&&!this.hasSavedExcludeConfiguration()){d.log(`ExcludeController.applyConfiguration('${this._section}')`);try{this._working=!0;const e=this.getExcludeConfiguration();await this.saveExcludeConfiguration(e);const t={key:e.key,globalValue:null==e.globalValue?void 0:{},workspaceValue:null==e.workspaceValue?void 0:{}},o=[];if(null!=e.globalValue&&null!=t.globalValue){const n=Object.create(null);for(const i of Object.keys(e.globalValue))t.globalValue[i]=n[i]=!1;o.push(k.updateAny(this._section,n,i.ConfigurationTarget.Global))}if(null!=e.workspaceValue&&null!=t.workspaceValue){const n=Object.create(null);for(const i of Object.keys(e.workspaceValue))t.workspaceValue[i]=n[i]=!1;o.push(k.updateAny(this._section,n,i.ConfigurationTarget.Workspace))}if(await this.saveAppliedExcludeConfiguration(t),!o.length)return;await Promise.allSettled(o)}catch(e){d.error(e),await this.clearExcludeConfiguration()}finally{d.log(`applyConfiguration('${this._section}')`,"done"),this._working=!1,this._onDidToggle.fire()}}}async restoreConfiguration(){if(!this._working&&this.hasSavedExcludeConfiguration()){d.log(`ExcludeController.restoreConfiguration('${this._section}')`);try{this._working=!0;const e=this.getSavedExcludeConfiguration(),t=[];if(null!=e&&(null!=e.globalValue&&t.push(k.updateAny(this._section,e.globalValue,i.ConfigurationTarget.Global)),null!=e.workspaceValue&&t.push(k.updateAny(this._section,e.workspaceValue,i.ConfigurationTarget.Workspace))),await this.clearExcludeConfiguration(),!t.length)return;await Promise.all(t)}catch(e){d.error(e),await this.clearExcludeConfiguration()}finally{d.log(`ExcludeController.restoreConfiguration('${this._section}')`,"done"),this._working=!1,this._onDidToggle.fire()}}}async toggleConfiguration(){this._working||(d.log(`ExcludeController.toggleConfiguration('${this._section}')`),this.hasSavedExcludeConfiguration()?await this.restoreConfiguration():await this.applyConfiguration())}get canToggle(){const e=this.getExcludeConfiguration();return null!=e&&(null!=e.globalValue||null!=e.workspaceValue)}get toggled(){return this.hasSavedExcludeConfiguration()}async clearExcludeConfiguration(){await this.saveAppliedExcludeConfiguration(void 0),await this.saveExcludeConfiguration(void 0)}getExcludeConfiguration(){return k.inspectAny(this._section)}getAppliedExcludeConfiguration(){return this.container.context.workspaceState.get(this.appliedState)}getSavedExcludeConfiguration(){const e=this.container.context.workspaceState.get(this.savedState);return _(l.Toggled,null!=e),this._loaded||(this._loaded=!0,_(l.Loaded,!0)),e}hasSavedExcludeConfiguration(){return null!=this.getSavedExcludeConfiguration()}async saveAppliedExcludeConfiguration(e){await this.container.context.workspaceState.update(this.appliedState,e)}async saveExcludeConfiguration(e){await this.container.context.workspaceState.update(this.savedState,e)}}class StatusBarController{constructor(e){this.container=e,this._disposable=i.Disposable.from(k.onDidChangeAny(this.onConfigurationChanged,this),k.onDidChange(this.onConfigurationChanged,this),e.filesExclude.onDidToggle(this._onExcludeToggled,this)),this.onConfigurationChanged()}dispose(){this._statusBarItem?.dispose(),this._disposable?.dispose()}onConfigurationChanged(e){if(null==e||k.changed(e,"statusBar.enabled")||e.affectsConfiguration("files.exclude")){this._statusBarItem?.dispose();const{canToggle:e}=this.container.filesExclude;k.get("statusBar.enabled")&&e&&(this._statusBarItem=i.window.createStatusBarItem(i.StatusBarAlignment.Right,0),this._statusBarItem.command=`${a}.toggle`,this.updateStatusBarItem(this.container.filesExclude.toggled),this._statusBarItem.show())}}updateStatusBarItem(e){null!=this._statusBarItem&&(this._statusBarItem.text=e?"$(eye-closed)":"$(eye)",this._statusBarItem.tooltip=(e?"Hide":"Show")+" Excluded Files")}_onExcludeToggled(){null!=this._statusBarItem&&this.updateStatusBarItem(this.container.filesExclude.toggled)}}class Container{static#e;static#t=new Proxy({},{get:function(e,t){if(null!=Container.#e)return Container.#e[t];if("config"===t)return k.getAll();throw new Error("Container is not initialized")}});static create(e){if(null!=Container.#e)throw new Error("Container is already initialized");return Container.#e=new Container(e),Container.#e}static get instance(){return Container.#e??Container.#t}constructor(e){this._context=e,e.subscriptions.splice(0,0,this._filesExcludeController=new FilesExcludeController(this)),e.subscriptions.splice(0,0,this._statusBar=new StatusBarController(this)),e.subscriptions.splice(0,0,this._commands=new Commands(this))}get commands(){return this._commands}get context(){return this._context}get filesExclude(){return this._filesExcludeController}get statusBar(){return this._statusBar}}const E=new Intl.Collator(void 0,{sensitivity:"accent"});function V(e,t){const i=E.compare(e,t);return 0===i?0:i>0?1:-1}function S(e,t){return"string"==typeof e&&(e=$(e)),"string"==typeof t&&(t=$(t)),e.major>t.major?1:e.major<t.major?-1:e.minor>t.minor?1:e.minor<t.minor?-1:e.patch>t.patch?1:e.patch<t.patch?-1:void 0===e.pre&&void 0!==t.pre?1:void 0!==e.pre&&void 0===t.pre?-1:void 0!==e.pre&&void 0!==t.pre?V(e.pre,t.pre):0}function $(e){const[t,i]=e.split("-"),[o,n,r]=t.split(".");return function(e,t,i,o){return{major:"string"==typeof e?parseInt(e,10):e,minor:"string"==typeof t?parseInt(t,10):t,patch:null==i?0:"string"==typeof i?parseInt(i,10):i,pre:o}}(o,n,r,i)}function D(e){const t=e.extension.packageJSON.version,o=function(e,t){if(null==e)return!1;const[i,o]=t.split(" ");if("="===i)return 0===S(e,o);if(">"===i)return S(e,o)>0;if(">="===i)return S(e,o)>=0;if("<"===i)return S(e,o)<0;if("<="===i)return S(e,o)<=0;throw new Error(`Unknown operator: ${i}`)}(t,"> 2023.0.0");d.configure({name:"Find Related",createChannel:function(e){return i.window.createOutputChannel(e)},toLoggable:function(e){if(e instanceof i.Uri)return`Uri(${e.toString(!0)})`}},function(e){switch(e){case"silent":return r.Off;case"errors":return r.Error;case"verbose":return r.Info;case"debug":return r.Debug;default:return e}}(k.get("outputLevel")),e.extensionMode===i.ExtensionMode.Development),d.log(`Toggle Excluded Files${o?" (pre-release)":""} v${t} activating in ${i.env.appName}(${i.version}) on the ${n?"web":"desktop"}`),Configuration.configure(e),Container.create(e)}function T(){}module.exports=t})();