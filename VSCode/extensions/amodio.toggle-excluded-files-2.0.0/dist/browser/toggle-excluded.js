(()=>{var e={d:(t,i)=>{for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{activate:()=>O,deactivate:()=>A});const i=require("vscode"),n=!0,o=navigator?.userAgentData?.platform,r=navigator.userAgent;"Linux"===o||r.indexOf("Linux"),"macOS"===o||r.indexOf("Macintosh"),"Windows"===o||r.indexOf("Windows");var a=(e=>(e.Off="off",e.Error="error",e.Warn="warn",e.Info="info",e.Debug="debug",e))(a||{});const s="toggleexcludedfiles",l="toggleexcludedfiles";var u=(e=>(e.Loaded="toggleexcludedfiles:loaded",e.Toggled="toggleexcludedfiles:toggled",e))(u||{}),g=(e=>(e.Open="vscode.open",e.SetContext="setContext",e))(g||{}),c=(e=>(e.AppliedState="toggleexcludedfiles:appliedState",e.SavedState="toggleexcludedfiles:savedState",e))(c||{});const d="";const h=new class Logger2{constructor(){this._isDebugging=!1,this.level=0,this._logLevel=a.Off}configure(e,t,i=!1){this.provider=e,this._isDebugging=i,this.logLevel=t}enabled(e){return this.level>=p(e)}get isDebugging(){return this._isDebugging}get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e,this.level=p(this._logLevel),e===a.Off?(this.output?.dispose?.(),this.output=void 0):this.output=this.output??this.provider.createChannel(this.provider.name)}get timestamp(){return`[${(new Date).toISOString().replace(/T/," ").slice(0,-1)}]`}debug(e,...t){if(this.level<4&&!this.isDebugging)return;let i;"string"==typeof e?i=e:(i=t.shift(),null!=e&&(i=`${e.prefix} ${i??d}`)),this.isDebugging&&console.log(this.timestamp,`[${this.provider.name}]`,i??d,...t),null==this.output||this.level<4||this.output.appendLine(`${this.timestamp} ${i??d}${this.toLoggableParams(!0,t)}`)}error(e,t,...i){if(this.level<1&&!this.isDebugging)return;let n;if(n=null==t||"string"==typeof t?t:`${t.prefix} ${i.shift()??d}`,null==n){const t=e instanceof Error?e.stack:void 0;if(t){const e=/.*\s*?at\s(.+?)\s/.exec(t);null!=e&&(n=e[1])}}this.isDebugging&&console.error(this.timestamp,`[${this.provider.name}]`,n??d,...i,e),null==this.output||this.level<1||this.output.appendLine(`${this.timestamp} ${n??d}${this.toLoggableParams(!1,i)}\n${String(e)}`)}log(e,...t){if(this.level<3&&!this.isDebugging)return;let i;"string"==typeof e?i=e:(i=t.shift(),null!=e&&(i=`${e.prefix} ${i??d}`)),this.isDebugging&&console.log(this.timestamp,`[${this.provider.name}]`,i??d,...t),null==this.output||this.level<3||this.output.appendLine(`${this.timestamp} ${i??d}${this.toLoggableParams(!1,t)}`)}warn(e,...t){if(this.level<2&&!this.isDebugging)return;let i;"string"==typeof e?i=e:(i=t.shift(),null!=e&&(i=`${e.prefix} ${i??d}`)),this.isDebugging&&console.warn(this.timestamp,`[${this.provider.name}]`,i??d,...t),null==this.output||this.level<2||this.output.appendLine(`${this.timestamp} ${i??d}${this.toLoggableParams(!1,t)}`)}showOutputChannel(e){this.output?.show?.(e)}toLoggable(e,t){if("object"!=typeof e)return String(e);const i=this.provider.toLoggable?.(e);if(null!=i)return i;try{return JSON.stringify(e,t)}catch{return"<error>"}}toLoggableParams(e,t){if(0===t.length||e&&this.level<4&&!this.isDebugging)return d;const i=t.map((e=>this.toLoggable(e))).join(", ");return 0!==i.length?` — ${i}`:d}};function p(e){switch(e){case a.Off:return 0;case a.Error:return 1;case a.Warn:return 2;case a.Info:return 3;case a.Debug:return 4;default:return 0}}var f=Object.defineProperty,C=Object.getOwnPropertyDescriptor,v=(e,t,i,n)=>{for(var o,r=n>1?void 0:n?C(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n?o(t,i,r):o(r))||r);return n&&r&&f(t,i,r),r};const w=[],m=(b=w,(e,t)=>function(e,t,n={}){return(o,r,l)=>{if("function"!=typeof l.value)throw new Error("not supported");let u;u=n.customErrorHandling?l.value:async function(...e){try{return await l.value.apply(this,n.args?n.args(e):e)}catch(e){if(h.error(e),n.showErrorMessage)if(h.enabled(a.Error)){const t=[{title:"Open Output Channel"}];await i.window.showErrorMessage(`${n.showErrorMessage}  —  ${e.toString()}`,...t)===t[0]&&h.showOutputChannel()}else i.window.showErrorMessage(`${n.showErrorMessage}  —  ${e.toString()}`);return}},e.push({name:`${s}.${t}`,key:r,method:u,options:n})}}(b,e,t));var b;class Commands{constructor(e){this.container=e,this._disposable=i.Disposable.from(...w.map((({name:e,method:t})=>i.commands.registerCommand(e,((...e)=>t.apply(this,e))))))}dispose(){this._disposable?.dispose()}restore(){return this.container.filesExclude.restoreConfiguration()}show(){return this.container.filesExclude.applyConfiguration()}toggle(){return this.container.filesExclude.toggleConfiguration()}}v([m("restore")],Commands.prototype,"restore",1),v([m("show")],Commands.prototype,"show",1),v([m("toggle")],Commands.prototype,"toggle",1);const x=new Map,y=new i.EventEmitter;y.event;async function _(e,t){x.set(e,t),await i.commands.executeCommand(g.SetContext,e,t),y.fire(e)}function k(e,t){if(e===t)return!0;if(null==e||null==t)return!1;const i=typeof e;return(i!==typeof t||"string"!==i&&"number"!==i&&"boolean"!==i)&&JSON.stringify(e)===JSON.stringify(t)}class Configuration{constructor(){this._onDidChange=new i.EventEmitter,this._onDidChangeAny=new i.EventEmitter,this._onWillChange=new i.EventEmitter}static configure(e){e.subscriptions.push(i.workspace.onDidChangeConfiguration(E.onConfigurationChanged,E))}get onDidChange(){return this._onDidChange.event}get onDidChangeAny(){return this._onDidChangeAny.event}get onWillChange(){return this._onWillChange.event}onConfigurationChanged(e){e.affectsConfiguration(l)?(this._onWillChange.fire(e),null!=this._overrides?.onChange&&(e=this._overrides.onChange(e)),this._onDidChangeAny.fire(e),this._onDidChange.fire(e)):this._onDidChangeAny.fire(e)}applyOverrides(e){this._overrides=e}clearOverrides(){null!=this._overrides&&(this._overrides.get=void 0,this._overrides.getAll=void 0,queueMicrotask((()=>this._overrides=void 0)))}get(e,t,n){const o=void 0===n?i.workspace.getConfiguration(l,t).get(e):i.workspace.getConfiguration(l,t).get(e,n);return null==this._overrides?.get?o:this._overrides.get(e,o)}getAll(e){const t=i.workspace.getConfiguration().get(l);return e||null==this._overrides?.getAll?t:this._overrides.getAll(t)}getAny(e,t,n){return void 0===n?i.workspace.getConfiguration(void 0,t).get(e):i.workspace.getConfiguration(void 0,t).get(e,n)}changed(e,t,i){return null==e||(Array.isArray(t)?t.some((t=>e.affectsConfiguration(`${l}.${t}`,i))):e.affectsConfiguration(`${l}.${t}`,i))}inspect(e,t){return i.workspace.getConfiguration(l,t).inspect(void 0===e?l:e)}inspectAny(e,t){return i.workspace.getConfiguration(void 0,t).inspect(e)}isUnset(e,t){const i=this.inspect(e,t);return void 0===i.workspaceFolderValue&&(void 0===i.workspaceValue&&void 0===i.globalValue)}async migrate(e,t,n){const o=this.inspect(e);if(void 0===o)return!1;let r=!1;return void 0!==o.globalValue&&(await this.update(t,null!=n.migrationFn?n.migrationFn(o.globalValue):o.globalValue,i.ConfigurationTarget.Global),r=!0),void 0!==o.workspaceValue&&(await this.update(t,null!=n.migrationFn?n.migrationFn(o.workspaceValue):o.workspaceValue,i.ConfigurationTarget.Workspace),r=!0),void 0!==o.workspaceFolderValue&&(await this.update(t,null!=n.migrationFn?n.migrationFn(o.workspaceFolderValue):o.workspaceFolderValue,i.ConfigurationTarget.WorkspaceFolder),r=!0),r||void 0===n.fallbackValue||(await this.update(t,n.fallbackValue,i.ConfigurationTarget.Global),r=!0),r}async migrateIfMissing(e,t,n){const o=this.inspect(e);if(void 0===o)return;const r=this.inspect(t);void 0!==o.globalValue&&(void 0!==r&&void 0!==r.globalValue||await this.update(t,null!=n.migrationFn?n.migrationFn(o.globalValue):o.globalValue,i.ConfigurationTarget.Global)),void 0!==o.workspaceValue&&(void 0!==r&&void 0!==r.workspaceValue||await this.update(t,null!=n.migrationFn?n.migrationFn(o.workspaceValue):o.workspaceValue,i.ConfigurationTarget.Workspace)),void 0!==o.workspaceFolderValue&&(void 0!==r&&void 0!==r.workspaceFolderValue||await this.update(t,null!=n.migrationFn?n.migrationFn(o.workspaceFolderValue):o.workspaceFolderValue,i.ConfigurationTarget.WorkspaceFolder))}matches(e,t,i){return e===t}name(e){return e}update(e,t,n){return i.workspace.getConfiguration(l).update(e,t,n)}updateAny(e,t,n,o){return i.workspace.getConfiguration(void 0,n===i.ConfigurationTarget.Global?void 0:o).update(e,t,n)}updateEffective(e,t){const n=this.inspect(e);return void 0!==n.workspaceFolderValue?t===n.workspaceFolderValue?Promise.resolve(void 0):this.update(e,t,i.ConfigurationTarget.WorkspaceFolder):void 0!==n.workspaceValue?t===n.workspaceValue?Promise.resolve(void 0):this.update(e,t,i.ConfigurationTarget.Workspace):n.globalValue===t||void 0===n.globalValue&&t===n.defaultValue?Promise.resolve(void 0):this.update(e,k(t,n.defaultValue)?void 0:t,i.ConfigurationTarget.Global)}}const E=new Configuration;class FilesExcludeController{constructor(e){this.container=e,this._onDidToggle=new i.EventEmitter,this._section="files.exclude",this._working=!1,this._loaded=!1,this._disposable=E.onDidChangeAny(this.onConfigurationChanged,this),this.onConfigurationChanged()}get onDidToggle(){return this._onDidToggle.event}dispose(){this._disposable?.dispose()}get appliedState(){return c.AppliedState}get savedState(){return c.SavedState}onConfigurationChanged(e){if(this._working)return;if(null!=e&&!e.affectsConfiguration(this._section))return;const t=this.getSavedExcludeConfiguration();if(null==t)return;h.log("ExcludeController.onConfigurationChanged");const i=this.getExcludeConfiguration();if(null!=i&&k(t.globalValue,i.globalValue)&&k(t.workspaceValue,i.workspaceValue))return;const n=this.getAppliedExcludeConfiguration();null!=i&&null!=n&&k(n.globalValue,i.globalValue)&&k(n.workspaceValue,i.workspaceValue)||(h.log("ExcludeController.onConfigurationChanged","clearing state"),this.clearExcludeConfiguration())}async applyConfiguration(){if(!this._working&&!this.hasSavedExcludeConfiguration()){h.log(`ExcludeController.applyConfiguration('${this._section}')`);try{this._working=!0;const e=this.getExcludeConfiguration();await this.saveExcludeConfiguration(e);const t={key:e.key,globalValue:null==e.globalValue?void 0:{},workspaceValue:null==e.workspaceValue?void 0:{}},n=[];if(null!=e.globalValue&&null!=t.globalValue){const o=Object.create(null);for(const i of Object.keys(e.globalValue))t.globalValue[i]=o[i]=!1;n.push(E.updateAny(this._section,o,i.ConfigurationTarget.Global))}if(null!=e.workspaceValue&&null!=t.workspaceValue){const o=Object.create(null);for(const i of Object.keys(e.workspaceValue))t.workspaceValue[i]=o[i]=!1;n.push(E.updateAny(this._section,o,i.ConfigurationTarget.Workspace))}if(await this.saveAppliedExcludeConfiguration(t),!n.length)return;await Promise.allSettled(n)}catch(e){h.error(e),await this.clearExcludeConfiguration()}finally{h.log(`applyConfiguration('${this._section}')`,"done"),this._working=!1,this._onDidToggle.fire()}}}async restoreConfiguration(){if(!this._working&&this.hasSavedExcludeConfiguration()){h.log(`ExcludeController.restoreConfiguration('${this._section}')`);try{this._working=!0;const e=this.getSavedExcludeConfiguration(),t=[];if(null!=e&&(null!=e.globalValue&&t.push(E.updateAny(this._section,e.globalValue,i.ConfigurationTarget.Global)),null!=e.workspaceValue&&t.push(E.updateAny(this._section,e.workspaceValue,i.ConfigurationTarget.Workspace))),await this.clearExcludeConfiguration(),!t.length)return;await Promise.all(t)}catch(e){h.error(e),await this.clearExcludeConfiguration()}finally{h.log(`ExcludeController.restoreConfiguration('${this._section}')`,"done"),this._working=!1,this._onDidToggle.fire()}}}async toggleConfiguration(){this._working||(h.log(`ExcludeController.toggleConfiguration('${this._section}')`),this.hasSavedExcludeConfiguration()?await this.restoreConfiguration():await this.applyConfiguration())}get canToggle(){const e=this.getExcludeConfiguration();return null!=e&&(null!=e.globalValue||null!=e.workspaceValue)}get toggled(){return this.hasSavedExcludeConfiguration()}async clearExcludeConfiguration(){await this.saveAppliedExcludeConfiguration(void 0),await this.saveExcludeConfiguration(void 0)}getExcludeConfiguration(){return E.inspectAny(this._section)}getAppliedExcludeConfiguration(){return this.container.context.workspaceState.get(this.appliedState)}getSavedExcludeConfiguration(){const e=this.container.context.workspaceState.get(this.savedState);return _(u.Toggled,null!=e),this._loaded||(this._loaded=!0,_(u.Loaded,!0)),e}hasSavedExcludeConfiguration(){return null!=this.getSavedExcludeConfiguration()}async saveAppliedExcludeConfiguration(e){await this.container.context.workspaceState.update(this.appliedState,e)}async saveExcludeConfiguration(e){await this.container.context.workspaceState.update(this.savedState,e)}}class StatusBarController{constructor(e){this.container=e,this._disposable=i.Disposable.from(E.onDidChangeAny(this.onConfigurationChanged,this),E.onDidChange(this.onConfigurationChanged,this),e.filesExclude.onDidToggle(this._onExcludeToggled,this)),this.onConfigurationChanged()}dispose(){this._statusBarItem?.dispose(),this._disposable?.dispose()}onConfigurationChanged(e){if(null==e||E.changed(e,"statusBar.enabled")||e.affectsConfiguration("files.exclude")){this._statusBarItem?.dispose();const{canToggle:e}=this.container.filesExclude;E.get("statusBar.enabled")&&e&&(this._statusBarItem=i.window.createStatusBarItem(i.StatusBarAlignment.Right,0),this._statusBarItem.command=`${s}.toggle`,this.updateStatusBarItem(this.container.filesExclude.toggled),this._statusBarItem.show())}}updateStatusBarItem(e){null!=this._statusBarItem&&(this._statusBarItem.text=e?"$(eye-closed)":"$(eye)",this._statusBarItem.tooltip=(e?"Hide":"Show")+" Excluded Files")}_onExcludeToggled(){null!=this._statusBarItem&&this.updateStatusBarItem(this.container.filesExclude.toggled)}}class Container{static#e;static#t=new Proxy({},{get:function(e,t){if(null!=Container.#e)return Container.#e[t];if("config"===t)return E.getAll();throw new Error("Container is not initialized")}});static create(e){if(null!=Container.#e)throw new Error("Container is already initialized");return Container.#e=new Container(e),Container.#e}static get instance(){return Container.#e??Container.#t}constructor(e){this._context=e,e.subscriptions.splice(0,0,this._filesExcludeController=new FilesExcludeController(this)),e.subscriptions.splice(0,0,this._statusBar=new StatusBarController(this)),e.subscriptions.splice(0,0,this._commands=new Commands(this))}get commands(){return this._commands}get context(){return this._context}get filesExclude(){return this._filesExcludeController}get statusBar(){return this._statusBar}}const V=new Intl.Collator(void 0,{sensitivity:"accent"});function S(e,t){const i=V.compare(e,t);return 0===i?0:i>0?1:-1}function $(e,t){return"string"==typeof e&&(e=D(e)),"string"==typeof t&&(t=D(t)),e.major>t.major?1:e.major<t.major?-1:e.minor>t.minor?1:e.minor<t.minor?-1:e.patch>t.patch?1:e.patch<t.patch?-1:void 0===e.pre&&void 0!==t.pre?1:void 0!==e.pre&&void 0===t.pre?-1:void 0!==e.pre&&void 0!==t.pre?S(e.pre,t.pre):0}function D(e){const[t,i]=e.split("-"),[n,o,r]=t.split(".");return function(e,t,i,n){return{major:"string"==typeof e?parseInt(e,10):e,minor:"string"==typeof t?parseInt(t,10):t,patch:null==i?0:"string"==typeof i?parseInt(i,10):i,pre:n}}(n,o,r,i)}function O(e){const t=e.extension.packageJSON.version,o=function(e,t){if(null==e)return!1;const[i,n]=t.split(" ");if("="===i)return 0===$(e,n);if(">"===i)return $(e,n)>0;if(">="===i)return $(e,n)>=0;if("<"===i)return $(e,n)<0;if("<="===i)return $(e,n)<=0;throw new Error(`Unknown operator: ${i}`)}(t,"> 2023.0.0");h.configure({name:"Find Related",createChannel:function(e){return i.window.createOutputChannel(e)},toLoggable:function(e){if(e instanceof i.Uri)return`Uri(${e.toString(!0)})`}},function(e){switch(e){case"silent":return a.Off;case"errors":return a.Error;case"verbose":return a.Info;case"debug":return a.Debug;default:return e}}(E.get("outputLevel")),e.extensionMode===i.ExtensionMode.Development),h.log(`Toggle Excluded Files${o?" (pre-release)":""} v${t} activating in ${i.env.appName}(${i.version}) on the ${n?"web":"desktop"}`),Configuration.configure(e),Container.create(e)}function A(){}module.exports=t})();